{% extends 'base.html' %}
{% block title %}My Dashboard{% endblock %}
{% block content %}

 <!--begin::App Main-->
      <main class="app-main">
        <!--begin::App Content Header-->
        <div class="app-content-header">
          <!--begin::Container-->
          <div class="container-fluid">
            <!--begin::Row-->
            <div class="row">
              <div class="col-sm-6"><h3 class="mb-0">Overview</h3></div>
              <div class="col-sm-6">
                <ol class="breadcrumb float-sm-end">
                  <li class="breadcrumb-item"><a href="{{ url_for('main.dashboard') }}">Home</a></li>
                  <li class="breadcrumb-item active" aria-current="page">Overview</li>
                </ol>
              </div>
            </div>
            <!--end::Row-->
          </div>
          <!--end::Container-->
        </div>
        <div class="app-content">
          <!--begin::Container-->
          <div class="container-fluid">
            <!-- Info boxes -->
            <div class="row">
              <div class="col-12 col-sm-6 col-md-3">
                <div class="small-box" style="background-color: #17a2b8; color: white;">
                  <div class="inner">
                    <h3>{{ total_articles }}</h3>
                    <p>Total Articles Analyzed</p>
                  </div>
                  <div class="small-box-icon">
                    <i class="bi bi-newspaper" style="font-size: 4rem;"></i>
                  </div>
                  <a href="{{ url_for('main.mediaaudit') }}" class="small-box-footer link-light">
                    Analyze More <i class="bi bi-arrow-right-circle"></i>
                  </a>
                </div>
              </div>

              <div class="col-12 col-sm-6 col-md-3">
                <div class="small-box" style="background-color: #28a745; color: white;">
                  <div class="inner">
                    <h3>{{ most_common_tone }}</h3>
                    <p>Most Common Tone</p>
                  </div>
                  <div class="small-box-icon">
                    <i class="bi bi-person-bounding-box" style="font-size: 4rem;"></i>
                  </div>
                  <a href="{{ url_for('main.mediaaudit') }}" class="small-box-footer link-light">
                    View Analysis <i class="bi bi-arrow-right-circle"></i>
                  </a>
                </div>
              </div>

              <div class="col-12 col-sm-6 col-md-3">
                <div class="small-box" style="background-color: #ffc107; color: white;">
                  <div class="inner">
                    <h3>{{ most_common_perspective }}</h3>
                    <p>Most Common Perspective</p>
                  </div>
                  <div class="small-box-icon">
                    <i class="bi bi-compass" style="font-size: 4rem;"></i>
                  </div>
                  <a href="{{ url_for('main.mediaaudit') }}" class="small-box-footer link-light">
                    View Breakdown <i class="bi bi-arrow-right-circle"></i>
                  </a>
                </div>
              </div>

              <div class="col-12 col-sm-6 col-md-3">
                <div class="small-box" style="background-color: #dc3545; color: white;">
                  <div class="inner">
                    <h3>{{ avg_anger }}</h3>
                    <p>Avg Anger Score</p>
                  </div>
                  <div class="small-box-icon">
                    <i class="bi bi-emoji-angry" style="font-size: 4rem;"></i>
                  </div>
                  <a href="{{ url_for('main.mediaaudit') }}" class="small-box-footer link-light">
                    View Emotions <i class="bi bi-arrow-right-circle"></i>
                  </a>
                </div>
              </div>
            </div>
            <!-- /.row -->
            <div class="row">
              <hr class="my-4">
              <h4>Recently Analyzed Articles</h4>
              <div class="table-responsive">
                <table class="table m-0">
                  <thead>
                    <tr>
                      <th>Summary</th>
                      <th>Source</th>
                      <th>Bias</th>
                      <th>Tone</th>
                      <th>Anger</th>
                      <th>Joy</th>
                      <th>Fear</th>
                      <th>Surprise</th>
                    </tr>
                  </thead>
                  <tbody>
                    {% for article in recent_articles %}
                    <tr>
                      <td>
                        {% if article.url and article.url != "#" %}
                          <a href="{{ article.url }}" target="_blank" rel="noopener noreferrer">{{ article.summary }}</a>
                        {% else %}
                          {{ article.summary }}
                        {% endif %}
                      </td>
                      <td>{{ article.domain }}</td>
                      <td>{{ article.bias }}</td>
                      <td>{{ article.tone }}</td>
                      <td>{{ article.anger }}</td>
                      <td>{{ article.joy }}</td>
                      <td>{{ article.fear }}</td>
                      <td>{{ article.surprise }}</td>
                    </tr>
                    {% endfor %}
                  </tbody>
                </table>
              </div>
            </div>
          </div>
          <!--end::Container-->
        </div>
        <!--end::App Content-->
      </main>
      <!--end::App Main-->

{% endblock %}